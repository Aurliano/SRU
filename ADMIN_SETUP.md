# راهنمای راه‌اندازی Admin Panel

## نصب و راه‌اندازی

### 1. نصب پکیج‌های مورد نیاز

```bash
pip install -r admin_requirements.txt
```

### 2. راه‌اندازی Admin Panel

```bash
python admin_panel.py
```

پنل مدیریت روی آدرس `http://localhost:5000` در دسترس خواهد بود.

## ویژگی‌های Admin Panel

### 📊 Dashboard (صفحه اصلی)
- نمایش آمار کلی کاربران
- نمودارهای تعاملی برای تحلیل داده‌ها
- آمار محتوای موجود
- فعالیت روزانه کاربران

### 👥 مدیریت کاربران
- لیست تمام کاربران با جزئیات
- جستجو و فیلتر کاربران
- مشاهده پیشرفت هر کاربر
- امکان ارسال پیام و مدیریت کاربران

### 📚 مدیریت محتوا
- مدیریت واژگان به تفکیک سطح
- مدیریت دروس گرامر
- مدیریت موضوعات مکالمه
- مدیریت سوالات آزمون

### 📈 آنالیتیکس پیشرفته
- گزارش‌های تفصیلی فعالیت
- نمودارهای زمانی پیشرفت
- آمار محبوبیت بخش‌ها
- صادرات گزارش‌ها

## ساختار فایل‌ها

```
telegram_bot/
├── admin_panel.py          # فایل اصلی پنل مدیریت
├── admin_requirements.txt  # پکیج‌های مورد نیاز
├── templates/              # قالب‌های HTML
│   ├── base.html           # قالب پایه
│   ├── dashboard.html      # صفحه اصلی
│   ├── users.html          # مدیریت کاربران
│   ├── user_details.html   # جزئیات کاربر
│   ├── content.html        # مدیریت محتوا
│   └── analytics.html      # آنالیتیکس
└── static/                 # فایل‌های استاتیک
    ├── css/
    │   └── admin.css       # استایل‌های سفارشی
    └── js/
        └── admin.js        # جاوااسکریپت‌های سفارشی
```

## امکانات موجود

### ✅ پیاده‌سازی شده
- [x] Dashboard با نمودارهای تعاملی
- [x] مدیریت کاربران و مشاهده جزئیات
- [x] آنالیتیکس پیشرفته با نمودارها
- [x] رابط کاربری responsive و زیبا
- [x] جستجو و فیلتر در کاربران
- [x] صادرات گزارش‌ها

### 🔧 قابل توسعه
- [ ] مدیریت محتوا (CRUD operations)
- [ ] ارسال پیام به کاربران
- [ ] مسدود کردن کاربران
- [ ] واردات دسته‌ای محتوا
- [ ] تنظیمات سیستم

## نکات مهم

### امنیت
- **مهم**: `secret_key` در فایل `admin_panel.py` را تغییر دهید
- برای استفاده در محیط تولید، احراز هویت اضافه کنید
- دسترسی به Admin Panel را محدود کنید

### Performance
- برای پایگاه داده‌های بزرگ، pagination اضافه کنید
- برای به‌روزرسانی real-time، WebSocket استفاده کنید
- Cache کردن نمودارها برای بهبود عملکرد

### Customization
- استایل‌ها در `static/css/admin.css` قابل تغییر هستند
- رنگ‌بندی و طراحی با Bootstrap قابل سفارشی‌سازی است
- نمودارها با Chart.js قابل تنظیم هستند

## API Endpoints

```
GET  /                      # Dashboard
GET  /users                 # لیست کاربران
GET  /user/<user_id>        # جزئیات کاربر
GET  /content               # مدیریت محتوا
GET  /analytics             # آنالیتیکس
GET  /api/chart-data/<type> # داده‌های نمودار
```

## متغیرهای محیط

```bash
# اختیاری - برای تنظیمات database
ADMIN_DB_PATH=user_data.db
CONTENT_DB_PATH=content_data.db
ADMIN_SECRET_KEY=your-secret-key-here
```

## عیب‌یابی

### مشکلات رایج

1. **خطای 'No module named flask'**
   ```bash
   pip install flask
   ```

2. **دیتابیس یافت نشد**
   - مطمئن شوید که `user_data.db` و `content_data.db` در همان پوشه باشند

3. **نمودارها نمایش داده نمی‌شوند**
   - اتصال اینترنت برای Chart.js لازم است
   - یا فایل‌های Chart.js را local نصب کنید

### Log ها

برای دیدن log های بیشتر، debug mode را فعال کنید:

```python
app.run(debug=True, host='0.0.0.0', port=5000)
```

## ارتقاء و توسعه

### افزودن ویژگی جدید

1. Route جدید در `admin_panel.py` اضافه کنید
2. Template مربوطه در `templates/` ایجاد کنید
3. استایل‌های لازم را در `static/css/admin.css` اضافه کنید
4. JavaScript لازم را در `static/js/admin.js` پیاده‌سازی کنید

### نمونه کد برای افزودن صفحه جدید

```python
@app.route('/new-feature')
def new_feature():
    data = admin_db.get_some_data()
    return render_template('new_feature.html', data=data)
```

## پشتیبانی

برای سوالات یا مشکلات:
1. لاگ‌های خطا را بررسی کنید
2. اتصال به دیتابیس را تست کنید
3. نسخه پکیج‌ها را بررسی کنید

این Admin Panel برای پایان‌نامه و مدیریت ربات آموزش انگلیسی طراحی شده و قابلیت‌های لازم برای آنالیز و گزارش‌گیری را فراهم می‌کند.
